class BackgroundManager{constructor(){const e=window.location.pathname.includes("/magi-scholar")?"/magi-scholar":"";this.images=[`${e}/assets/img/11.jpg`,`${e}/assets/img/1.jpg`,`${e}/assets/img/2.jpg`,`${e}/assets/img/3.jpg`,`${e}/assets/img/4.jpg`,`${e}/assets/img/5.jpg`,`${e}/assets/img/8.jpg`,`${e}/assets/img/9.jpg`],this.personalPhotos=[`${e}/assets/img/me-001.jpg`,`${e}/assets/img/me-002.jpg`,`${e}/assets/img/me-003.jpg`,`${e}/assets/img/me-004.jpg`,`${e}/assets/img/me-005.jpg`,`${e}/assets/img/me-006.jpg`,`${e}/assets/img/me-008.jpg`,`${e}/assets/img/me-009.jpg`],this.loadedImages=new Set,this.init()}init(){this.showPreloader(),this.preloadImages(),this.setupIntersectionObserver(),this.addBackgroundEffects(),this.usePersonalBackground()}showPreloader(){const e=document.createElement("div");e.className="bg-preloader",e.innerHTML='\n      <div class="loader-container">\n        <div class="loader"></div>\n        <p style="margin-top: 1rem; color: var(--global-text-color-light);">\n          Loading beautiful visuals...\n        </p>\n      </div>\n    ',document.body.appendChild(e)}preloadImages(){const e=this.images.map((e=>new Promise(((t,s)=>{const o=new Image;o.onload=()=>{this.loadedImages.add(e),t(e)},o.onerror=()=>s(e),o.src=e}))));Promise.allSettled(e).then((()=>{this.hidePreloader(),this.activateBackgrounds()}))}hidePreloader(){const e=document.querySelector(".bg-preloader");e&&(e.classList.add("loaded"),setTimeout((()=>{e.remove()}),500))}activateBackgrounds(){const e=document.querySelector(".hero-bg");e&&(e.style.opacity="0",e.style.transition="opacity 1s ease-in-out",setTimeout((()=>{e.style.opacity="1"}),100)),window.innerWidth>768&&this.setupParallax()}setupParallax(){window.addEventListener("scroll",(()=>{const e=window.pageYOffset;document.querySelectorAll(".hero-bg, .section-bg").forEach((t=>{const s=-.5*e;t.style.transform=`translateY(${s}px)`}))}))}setupIntersectionObserver(){const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("animate-fade-in-up")}))}),{threshold:.1});document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".card, .section-content").forEach((t=>e.observe(t)))}))}addBackgroundEffects(){document.addEventListener("mousemove",(e=>{const t=document.querySelector(".hero-bg");if(!t)return;const{clientX:s,clientY:o}=e,{innerWidth:a,innerHeight:n}=window,r=20*(s/a-.5),i=20*(o/n-.5);t.querySelector("::after")&&(t.style.setProperty("--mouse-x",`${r}px`),t.style.setProperty("--mouse-y",`${i}px`))}))}changeBackground(e,t){if(t<this.images.length){const s=this.images[t];e.style.backgroundImage=`url('${s}')`}}usePersonalBackground(){const e=window.location.pathname;if(["/about/","/gallery/","/cv/"].some((t=>e.includes(t)))){const e=this.personalPhotos[Math.floor(Math.random()*this.personalPhotos.length)],t=document.querySelector(".hero-bg");t&&e&&(t.style.background=`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('${e}')`,t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.backgroundAttachment="fixed")}}initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}))}))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>new BackgroundManager)):new BackgroundManager,window.BackgroundManager=BackgroundManager;